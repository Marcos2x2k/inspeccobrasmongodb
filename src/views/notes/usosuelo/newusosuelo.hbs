<script>
    function ffechaactual() {
        var tipo = document.getElementById('fechainicio');
        var eye = document.getElementById('botonfecha');
        if (tipo.type == "date") {
            tipo.type = "date";
            eye.class = "btn btn-primary"
            const fecha = new Date();
            const dia = fecha.getDate()
            var mes = 0
            const calcmes = fecha.getMonth() + 1
            if (calcmes < 10) {
                mes = "0" + calcmes + "-"
            } else {
                mes = calcmes + "-"
            }
            if (dia > 0 && dia < 10) {
                var diastring = "0" + dia
            } else {
                var diastring = dia
            }
            const ano = fecha.getFullYear() + "-"
            //const fullyear = fecha.toLocaleDateString();
            const fullyear = ano + mes + diastring
            //const fullyear = fecha.toLocaleDateString();
            tipo.value = fullyear;
        } else {
            //tipo.disabled = false;
            tipo.type = "date";
            eye.class = "btn btn-secondary"
        }
    }

    function fhoraactual() {
        var tipohora = document.getElementById('horaingreso');
        var eyehora = document.getElementById('botonhora');
        if (tipohora.type == "time") {
            //tipohora.disabled = true;
            tipohora.type = "text";
            eyehora.class = "btn btn-primary"
            const fecha = new Date();
            const h = fecha.getHours() + ":";
            const m = fecha.getMinutes();
            if (m < 10) {
                const m = "0" + fecha.getMinutes();
            } else {
                const m = fecha.getMinutes();
            }
            //s = today.getSeconds();
            const fullhora = h + m // + s
            //const fullyear = fecha.toLocaleDateString();
            tipohora.value = fullhora;
        } else {
            //tipohora.disabled = false;
            tipohora.type = "time";
            //tipohora.value = "--:--"
            eyehora.class = "btn btn-secondary"
        }
    }

    function ShowName(name) {
        var writtenName = document.getElementById(name).value;
        document.getElementById(name).value = formatToString(writtenName);
        //var writtenName = document.getElementById('iniciador').value;
        //document.getElementById('iniciador').value = formatToString(writtenName);
    }

    function formatToString(writtenName) {
        var tmp = writtenName.split(" ");
        var fullName;
        tmp.forEach(element => {
            if (fullName) {
                fullName = fullName + " " + element.charAt(0).toUpperCase() + element.slice(1).toLocaleLowerCase();
            } else {
                fullName = element.charAt(0).toUpperCase() + element.slice(1).toLocaleLowerCase();
            }
        })
        return fullName;
    }

    function ponerminuscula(minus) {
        let ex = document.getElementById(minus);
        ex.value = ex.value.toLowerCase();
        //let y = document.getElementById("adrema");
        //y.value = y.value.toLowerCase();
    }

    function PonerMayuscula(mayus) {
        let ex = document.getElementById(mayus);
        ex.value = ex.value.toUpperCase();
    }

</script>

<style>
    textarea {
        resize: none;
        rows: "2";
    }
</style>

<div class="col-md-8 mx-auto">
    <div class="card">
        <div class="car-header mx-auto">
            <br />
            <h3 style="color:blue; text-decoration:underline; font-weight: bold;">Nuevo Expediente / Uso-Suelo</h3>
        </div>
        <div class="card-body">
            {{!-- <form action="/notes/newmesaentradas/{{mesaentrada._id}}?_method=POST" method="POST"></form> --}}
            <form action="/notes/usosuelo/newusosuelo" method="POST" enctype="multipart/form-data">
                <div class="form-group" style="font-weight: bold;">
                    Fecha Inicio:
                    <div class="input-group-append">
                        <input style="color:black" type="date" id="fechainicio" name="fechainicio" class="form-control">
                        <button id="botonfecha" class='btn btn-primary' name="botonfecha" type="button"
                            onclick="ffechaactual()">
                            <span class="fa fa-calendar icon"></span>
                        </button>
                    </div>
                </div>
                {{!--
                <div class="form-group" style="font-weight: bold;">
                    Hora (Actual):
                </div>
                <div class="input-group-append">
                    <input id="horaingreso" style="font-weight: bold; color:black" type="time" name="horaingreso"
                        class="form-control">
                    <button id="botonhora" class='btn btn-primary' name="botonhora" type="button"
                        onclick="fhoraactual()">
                        <span class="fa fa-hourglass-half" aria-hidden="true"></span>
                    </button>
                </div>
                --}}
                <div class="form-group" style="font-weight: bold;">
                    N° Expediente:
                    <input id="expediente" onkeyup="PonerMayuscula('expediente')" style="color:green" minlength="0"
                        maxlength="11" type="text" name="expediente" class="form-control" placeholder="0000-0-0000">
                </div>
                <div class="form-group" style="font-weight: bold;">
                    Iniciador - Nombre/Apellido
                    <input onkeyup="ShowName('iniciador')" style="color:green" minlength="10" maxlength="40" type="text"
                        name="iniciador" id="iniciador" class="form-control" placeholder="Nombre y Apellido" required
                        autofocus>
                </div>
                <div class="form-group" style="font-weight: bold;">
                    Documento Nacional Identidad:
                    <input type="dni" maxlength="9" style="color:green" value="{{mesaentrada.dni}}" name="dni"
                        class="form-control" type="text" placeholder="Colocar DNI sin puntos" required
                        autofocus></input>
                </div>
                <div class="form-group" style="font-weight: bold;">
                    Extracto:
                    <textarea style="color:green" name="extracto" class="form-control"
                        placeholder="Extracto"></textarea>
                </div>
                <div class="form-group" style="font-weight: bold;">
                    Motivo:
                    <textarea style="color:green" name="motivo" id="motivo" class="form-control"
                        placeholder="Motivo"></textarea>
                </div>
                <div class="form-group" style="font-weight: bold;">
                    N° Adrema:
                    <input id="adrema" onkeyup="PonerMayuscula('adrema')" style="color:green" minlength="0"
                        maxlength="11" type="text" name="adrema" class="form-control" placeholder="0000-0-0000">
                </div>
                <div class="form-group" style="font-weight: bold;">
                    Dirección:
                    <input onkeyup="ShowName('direccion')" style="color:green" minlength="10" maxlength="40" type="text"
                        name="direccion" id="direccion" class="form-control" placeholder="Dirección" required>
                </div>
                <div class="form-group" style="font-weight: bold;">
                    contacto Celular:
                    <input onkeyup="ponerminuscula('contacto')" style="color:green" minlength="0" maxlength="30"
                        name="contacto" id="contacto" class="form-control" placeholder="Celular"></input>
                </div>
                <div class="form-group" style="font-weight: bold;">
                    Profesional:
                    <input onkeyup="ShowName('profesional')" style="color:green" minlength="10" maxlength="40"
                        type="text" name="profesional" id="profesional" class="form-control" placeholder="Profesional"
                        required>
                </div>
                <div class="form-group" style="font-weight: bold;">
                    contacto E-mail/Correo:
                    <input onkeyup="ponerminuscula('correo')" style="color:green" minlength="0" maxlength="30"
                        name="correo" id="correo" class="form-control" placeholder="E-mail"></input>
                </div>
                <div class="form-group" style="color:black; font-style:oblique; font-weight: bold;">
                    Fecha Envío de Correo
                    <input type="date" name="fechaenviocorreo" id="fechaenviocorreo" class="form-control" placeholder="Fecha Envío de Correo">
                </div>
                <div class="form-group" style="color:black; font-style:oblique; font-weight: bold;">
                    Extracto de Correo
                    <input type="text" name="extractocorreo" id="extractocorreo" class="form-control" placeholder="Extracto de Correo">
                </div>
                <div class="form-group" style="font-weight: bold;">
                    Fecha Ingreso DUS:
                    <textarea type="text" style="color:green" name="fechaingresodus" class="form-control"
                        placeholder="Fecha Ingreso DUS"></textarea>
                </div>
                <div class="form-group" style="font-weight: bold;">
                    Fecha Egreso Dus:
                    <textarea type="text" style="color:green" name="fechaegresodus" class="form-control"
                        placeholder="Fecha Egreso Dus"></textarea>
                </div>
                <div class="form-group" style="font-weight: bold;">
                    Observaciones:
                    <textarea style="color:green;" name="observaciones" class="form-control"
                        placeholder="Observaciones"></textarea>
                </div>
                <div class="form-group" style="font-weight: bold;">
                    Antecedentes:
                    <textarea style="color:green;" name="antecedentes" class="form-control"
                        placeholder="Antecedentes"></textarea>
                </div>
                <label style="font-weight:bold">Seleccione Fotos Inspección: (Máximo 3):</label>
                <div class="input-group mb-3">
                    <div class="custom-file">
                        <input type="file" name="image" class="custom-file-input" id="inputGroupFile02"
                            accept=".jpg,.png" multiple>
                        <label class="custom-file-label" for="inputGroupFile02"
                            aria-describedby="inputGroupFileAddon02">Seleccione Fotos</label>
                    </div>
                </div>
                <div class="form-group" style="font-weight: bold;">
                    <button class="btn btn-primary btn-block" type="submit">
                        Grabar
                    </button>
                </div>
                <div>
                    <p style="color:brown; font-style:oblique; font-weight: bold;"><a href="/usosuelo/listado"><i
                                class="fas fa-list" style='font-size:24px;color:blue'></i></a> Volver Listado</p>
                </div>
            </form>
        </div>
    </div>
</div>