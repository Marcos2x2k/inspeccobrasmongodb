<script>
    
    window.onload = function () {
        let montototal = document.getElementById('montototal').value
        var total = parseFloat(montototal)
        document.getElementById('montototalvalorreal').value = total.toLocaleString('es-ES');
    };    

    function agregarSeparadorMiles(numero) {
        let montototal = document.getElementById(numero).value
        var total = parseFloat(montototal)
        document.getElementById('montototalvalorreal').value = total.toLocaleString('es-ES');
        //document.getElementById('montototal').value = total.toLocaleString('es-ES');        
    }

    function ponermayuscula(mayus) {
        let ex = document.getElementById(mayus);
        ex.value = ex.value.toUpperCase();
    }

    function ShowName() {
        var writtenName = document.getElementById('propietario').value;
        document.getElementById('propietario').value = formatToString(writtenName);
    }

    function formatToString(writtenName) {
        var tmp = writtenName.split(" ");
        var fullName;
        tmp.forEach(element => {
            if (fullName) {
                fullName = fullName + " " + element.charAt(0).toUpperCase() + element.slice(1).toLocaleLowerCase();
            } else {
                fullName = element.charAt(0).toUpperCase() + element.slice(1).toLocaleLowerCase();
            }
        })
        return fullName;
    }
   
</script>


<div class="col-md-7 mx-auto">
    <div class="card">
        <div class="card-header">
            <h3>
                Editar Liquidacion Propietario (Multas/Tasas)
            </h3>
        </div>
        <div class="card-body">
            <form action="/multas/editmultas/{{multas._id}}?_method=PUT" method="POST">

                <input type="hidden" name="_method" value="PUT">
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Fecha:
                    <input type="date" name="fecha" class="form-control" placeholder="Sin Información"
                        value="{{multas.fecha}}" style="color: black; font-weight: bold;" disabled>
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Expediente:
                    <input type="text" name="expediente" class="form-control" placeholder="Sin Información"
                        value="{{multas.expediente}}" style="color: black; font-weight: bold;">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Adrema:
                    <input type="text" name="adrema" class="form-control" placeholder="Sin Información"
                        value="{{multas.adrema}}" style="color: black; font-weight: bold;">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Nombre y Apellido:
                    <input onkeyup="ShowName('propietario')" type="text" id="propietario" name="propietario"
                        class="form-control" placeholder="Nombre y Apellido" value="{{multas.propietario}}"
                        style="color: black; font-weight: bold;">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Numº Acta:
                    <input onkeyup="ponermayuscula('numacta')" type="text" id="numacta" name="numacta"
                        class="form-control" placeholder="No Especificado" value="{{ multas.numacta }}"
                        style="color: black; font-weight: bold;">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Acta:
                    <input onkeyup="ponermayuscula('acta')" type="text" id="acta" name="acta" class="form-control"
                        placeholder="Sin Información" value="{{multas.acta}}" style="color: black; font-weight: bold;">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Formula Utilizada:
                    <input type="text" name="formulamulta" class="form-control" placeholder="Sin Información"
                        value="{{multas.formulamulta}}" style="color: black; font-weight: bold;" disabled>
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Observaciones/Posible variación fórmula:
                    <input type="text" name="observaciones" class="form-control" placeholder="Sin Información"
                        value="{{ multas.observaciones }}" style="color: black; font-weight: bold;">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Tasa Utilizada:
                    <input type="text" name="tcactual" class="form-control" placeholder="Sin Información"
                        value="{{ multas.tcactual }}" style="color: black; font-weight: bold;">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Con Sanción/ Sin Sanción:
                    <input type="text" name="sancionprof" class="form-control" placeholder="Sin Información"
                        value="{{ multas.sancionprof }}" style="color: black; font-weight: bold;">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Porcentaje Sanción:
                    <input type="text" name="sancionprorc" class="form-control" placeholder="Sin Información"
                        value="{{ multas.sancionprorc }}" style="color: black; font-weight: bold;">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Apercibimiento Profesional:
                    <input type="text" name="apercibimientoprofesional" class="form-control"
                        placeholder="Sin Información" value="{{ multas.apercibimientoprofesional }}"
                        style="color: black; font-weight: bold;" disabled>
                </div>

                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Reiteraciones:
                    <input type="text" name="reiteracion" class="form-control" placeholder="Sin Información"
                        value="{{ multas.reiteracion }}" style="color: black; font-weight: bold;">
                </div>                

                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Monto Total Cobrado: (${{multas.montototal}};)
                    <p style="color:black">( Al Colocar nuevo monto,el punto es para decimal!)</p>
                    <input step="0.01" min="0"
                        style="color:black; border: 0; width: 140px;border-radius: 8px; background-color: grey"
                        id="montototalvalorreal" name="montototalvalorreal" readonly>(aqui refleja monto con puntos y
                    decimales)</input>
                    <p></p>
                    <input onkeyup="agregarSeparadorMiles('montototal')" style="color: red; font-weight: bold;"
                        type="number" step="0.01" id="montototal" name="montototal" 
                        class="form-control" value="{{multas.montototal}}" required/>
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Infracción/Infracción y Paralización:
                    <input type="text" name="infraccionoparalizacion" class="form-control" placeholder="Sin Información"
                        value="{{multas.infraccionoparalizacion}}" style="color: black; font-weight: bold;" disabled>
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Impreso:
                    <input type="text" name="impreso" class="form-control" placeholder="Sin Información"
                        value="{{multas.impreso}}" style="color: rgb(255, 0, 0); font-weight: bold;" disabled>
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Fecha Impresion:
                    <input type="text" name="fechaimpreso" id="fechaimpreso" class="form-control"
                        placeholder="Sin Información" value="{{multas.fechaimpreso}}"
                        style="color: black; font-weight: bold;" disabled>
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Re-Impreso:
                    <input type="text" name="reimpreso" class="form-control" placeholder="Sin Información"
                        value="{{multas.reimpreso}}" style="color: black; font-weight: bold;" disabled>
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Veces Re-Impreso:
                    <input type="text" name="reimpreso" class="form-control" placeholder="Sin Información"
                        value="{{multas.vecesreimpreso}}" style="color: black; font-weight: bold;" disabled>
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Fecha Re-Impresion:
                    <input type="text" name="fechareimpreso" id="fechareimpreso" class="form-control"
                        placeholder="Sin Información" value="{{multas.fechareimpreso}}"
                        style="color: grey; font-weight: bold;" disabled>
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Datos Exactos Creación Multa:
                    <input type="text" id="date" name="date" class="form-control" placeholder="Sin Información"
                        value="{{multas.date}}" style="color: grey; font-weight: bold;" disabled>
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Cargó Tasas/Multa:
                    <input type="text" name="name" class="form-control" placeholder="Sin Información"
                        value="{{multas.name}}" style="color: grey; font-weight: bold;" disabled>
                </div>
                <br />
                <div class="form-group">
                    <button class="btn btn-primary btn-block" type="submit">
                        Grabar
                    </button>
                </div>
            </form>
            <a href="javascript:window.history.back();" style="color:blue; font-weight: bold;">
                &laquo; Volver Atrás
            </a>
            <br /><br />
        </div>
    </div>
</div>