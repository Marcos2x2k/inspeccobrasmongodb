<script>

    function ShowName(name) {
        var writtenName = ""
        writtenName = document.getElementById(name).value;
        document.getElementById(name).value = formatToString(writtenName);
    }

    function formatToString(writtenName) {
        var tmp = writtenName.split(" ");
        var fullName;
        tmp.forEach(element => {
            if (fullName) {
                fullName = fullName + " " + element.charAt(0).toUpperCase() + element.slice(1).toLocaleLowerCase();
            } else {
                fullName = element.charAt(0).toUpperCase() + element.slice(1).toLocaleLowerCase();
            }
        })
        return fullName;
    }

    function ponerMayuscula(mayu) {
        let ex = document.getElementById(mayu);
        ex.value = ex.value.toUpperCase();
        //let ex = document.getElementById("numexpediente");
        //ex.value = ex.value.toUpperCase();
        //let y = document.getElementById("adremaexp");
        //y.value = y.value.toUpperCase();
    }


    function ponerminuscula(minus) {
        let ex = document.getElementById(minus);
        ex.value = ex.value.toLocaleLowerCase();
        //let ex = document.getElementById("correofiduciariopropsocio");
        //ex.value = ex.value.toLocaleLowerCase();
    }

    function EstadoCoordInspeccion() {
        var selestadoinsp = document.getElementById("selestadoinsp");
        var divres = document.getElementById("divresultadoinspeccion");
        var fi = document.getElementById("fechaintimacion");
        var hi = document.getElementById("horaintimacion");
        var vi = document.getElementById("vencimientointimacion");
        var fintinf = document.getElementById("intimvinculadainfraccion");
        var finf = document.getElementById("fechainfraccion");
        var hinf = document.getElementById("horainfraccion");
        var di = document.getElementById("descripcionintimacion");
        var dinf = document.getElementById("descripcioninfraccion");
        var grabar = document.getElementById("grabar")
        if (selestadoinsp.selectedIndex == 0) {
            divres.style.display = "none";
            fi.style.display = "none";
            hi.style.display = "none";
            vi.style.display = "none";
            fintinf.style.display = "none";
            finf.style.display = "none";
            hinf.style.display = "none"; 
            di.style.display = "none"; 
            dinf.style.display = "none"; 
            grabar.disabled = true;
        } else if (selestadoinsp.selectedIndex == 1) {
            divres.style.display = "block";
            grabar.disabled = false;
        }
    }

    function seleccionresinsp() {
        var selresultadoinspeccion = document.getElementById("selresultadoinspeccion");
        var fi = document.getElementById("fechaintimacion");
        var hi = document.getElementById("horaintimacion")
        var vi = document.getElementById("vencimientointimacion")
        var fintinf = document.getElementById("intimvinculadainfraccion")
        var finf = document.getElementById("fechainfraccion")
        var hinf = document.getElementById("horainfraccion")
        var di = document.getElementById("descripcionintimacion")
        var dinf = document.getElementById("descripcioninfraccion")
        var x = selresultadoinspeccion.selectedIndex
        if (x == 0 || x == 1 || x == 2) {
            fi.style.display = "none";
            hi.style.display = "none";
            vi.style.display = "none";
            fintinf.style.display = "none";
            finf.style.display = "none";
            hinf.style.display = "none"; 
            di.style.display = "none"; 
            dinf.style.display = "none"; 
            // require false para int e inf
            fintinf.required = "false";
            finf.required = "false";
            hinf.required = "false";
            dinf.required = "false";     
            fi.required = "false";
            hi.required = "false";
            vi.required = "false";  
            di.required = "false";
        } else if (x == 3) {
            fi.style.display = "block";
            hi.style.display = "block";
            vi.style.display = "block";
            di.style.display = "block";
            fintinf.style.display = "none";
            finf.style.display = "none";
            hinf.style.display = "none"; 
            dinf.style.display = "none"; 
            // requerir input de intimacion
            fi.attributes.required = "required";
            hi.attributes.required = "required";
            vi.attributes.required = "required";
            di.attributes.required = "required";
        } else if (x == 4) {
            fintinf.style.display = "block";
            finf.style.display = "block";
            hinf.style.display = "block"; 
            dinf.style.display = "block";      
            fi.style.display = "none";
            hi.style.display = "none";
            vi.style.display = "none";   
            di.style.display = "none";
            // requiere infraccion
            fintinf.required = "true";
            finf.required = "true";
            hinf.required = "true";
            dinf.required = "true";  
        }
    }

</script>

<div class="col-md-6 mx-auto">
    <div class="card">
        <div class="car-header mx-auto">
            <br />
            <h5 style="color:blue; text-decoration:underline; font-weight: bold;">
                Cambiar Estado de Coord.Inspección
            </h5>
        </div>
        <div class="card-body">
             {{!-- <form action="/notes/newtickets" method="POST"></form> --}}
            <form action="/notes/newexpedcoordinresult/" method="POST"> 
                <div class="form-group">
                    Id Expediente:
                    <input id="idexpediente" type="text" name="idexpediente"
                        class="form-control" placeholder="ID" value="{{expedcoordinado._id}}"
                        readonly>
                </div>        
                <div class="form-group">
                    Expediente Nº:
                    <input onkeyup="ponerMayuscula('numexpediente')" id="numexpediente" type="text" name="numexpediente"
                        class="form-control" placeholder="Expediente Nº" value="{{expedcoordinado.numexpediente}}"
                        readonly>
                </div>
                <div class="form-group">
                    Estado Coord.Inspección:
                    <select name="estado" id="selestadoinsp" onclick="EstadoCoordInspeccion()">
                        <option value="Pendiente">Pendiente</option>
                        <option value="Realizado">Realizado</option>
                    </select>
                </div>
                <div id="divresultadoinspeccion" style="display:none" class="form-group">
                    <p>Resultado Inspección:</p>
                    <select style="color:red;" name="resultadoinspeccion" id="selresultadoinspeccion" onclick="seleccionresinsp()">                        
                        <option value="No se pudo Verificar">No se pudo Verificar</option>
                        <option value="No se pudo Inspeccionar">No se pudo Inspeccionar</option>
                        <option value="Se Realizo informe">Realizó informe</option>
                        <option value="Se Intimó">Se Intimó</option>
                        <option value="Se Infraccionó">Se Infraccionó</option>
                    </select>
                </div>
                <div style="color:red; display:none;" id="fechaintimacion" class="form-group">
                    Fecha Intimación:
                    <input type="date" name="fechaintimacion" class="form-control"></input>
                </div>
                <div id="horaintimacion"  style="color:red; display:none;" class="form-group">
                    Hora Intimación:
                    <input type="time" name="horaintimacion" class="form-control"
                        placeholder="Fecha Hora Inspección"></input>
                </div>
                <div id="vencimientointimacion" style="color:red; display:none;" class="form-group">
                    Vencimiento Intimación:
                    <input type="date" name="vencimientointimacion" class="form-control"
                        placeholder="Fecha Hora Inspección"></input>
                </div>
                <div id="descripcionintimacion" style="color:red; display:none;" class="form-group">
                    Causas/Descripción Intimación:
                    <textarea name="descripcionintimacion" class="form-control"
                        placeholder="No Posee Descripción"></textarea>
                </div>
                <div id="intimvinculadainfraccion"  style="color:red; display:none;" class="form-group">
                    Número Intimación vinculada a esta Infracción:
                    <input type="text" name="" class="form-control"
                        placeholder="Intimación Vinculada a esta Infacción"></input>
                </div>
                <div id="fechainfraccion"  style="color:red; display:none;" class="form-group">
                    Fecha Infraccionó:
                    <input type="date" name="fechainfraccion" class="form-control"
                        placeholder="Fecha Hora Inspección"></input>
                </div>
                <div id="horainfraccion" style="color:red; display:none;" class="form-group">
                    Hora Infraccionó:
                    <input type="time"  name="horainfraccion" class="form-control"
                        placeholder="Fecha Hora Inspección"></input>
                </div>
                <div id="descripcioninfraccion" style="color:red; display:none;" class="form-group">
                    Causas/Descripción Infracción:
                    <textarea name="descripcioninfraccion" class="form-control"
                        placeholder="No Posee Descripción"></textarea>
                </div>
                <div class="form-group">
                    Código Inspector:
                    <input onkeyup="ShowName('codigoinspector')" type="text" id="codigoinspector" name="codigoinspector"
                        class="form-control" placeholder="Código Inspector" value="{{expedcoordinado.codigoinspector}}"
                        />
                </div>
                <div class="form-group">
                    Inspector (NyA):
                    <input onkeyup="ShowName('inspector')" type="text" id="inspector" name="inspector"
                        class="form-control" placeholder="Inspector (NyA)" value="{{expedcoordinado.inspector}}"
                        />
                </div>
                <div class="form-group">
                    Iniciador (NyA):
                    <input onkeyup="ShowName('iniciadornomyape')" type="text" id="iniciadornomyape"
                        name="iniciadornomyape" class="form-control" placeholder="Iniciador (NyA)"
                        value="{{expedcoordinado.iniciadornomyape}}" readonly />
                </div>
                <div class="form-group">
                    Domicilio:
                    <input onkeyup="ShowName('domicilio')" type="text" id="domicilio" name="domicilio"
                        class="form-control" placeholder="Domicilio" value="{{expedcoordinado.domicilio}}" readonly />
                </div>
                <div class="form-group">
                    Adrema Nº:
                    <input onkeyup="ponerMayuscula('adremaexp')" id="adremaexp" name="adremaexp" class="form-control"
                        placeholder="Nº Adrema" value="{{expedcoordinado.adremaexp}}" readonly></input>
                </div>
                <div class="form-group">
                    Fecha Inspección:
                    <input type="text" name="fechainicioentrada" class="form-control" placeholder="Fecha inicio entrada"
                        value="{{expedcoordinado.fechainspeccion}}" readonly></input>
                </div>
                <div class="form-group">
                    Hora Inspección:
                    <input type="text" name="horainspeccion" class="form-control" placeholder="Fecha Hora Inspección"
                        value="{{expedcoordinado.horainspeccion}}" readonly></input>
                </div>
                <p></p>
                <div  class="form-group">
                    <button id="grabar"class="btn btn-primary btn-block" type="submit" disabled>
                        Grabar
                    </button>
                </div>
                <div class="form-group">
                    <a href="javascript:window.history.back();" style="color:blue; font-weight: bold;">
                        &laquo; Volver Atrás
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>