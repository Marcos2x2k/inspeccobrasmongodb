<script>

    // Carga al inicio pero solo si hay un body
    //function myOnLoad() {
    //    cargar_provincias()
    //}

    //carga al iniciar la pagina
    window.onload = function () {
        //cargar_Roles()
        //document.getElementById('botonfecha').click();
    }
    // funcion para Cargar Provincias al campo <select>
    function cargar_Roles() {
        var todoslosroles = ["Mesa-Entrada", "Administrativo", "Administrador", "Jefe-Inspectores",
            "Inspector", "Liquidaciones"];
        //const rolinspectoresborrara = inspectores.rolusuario.toString();
        var roltraido = document.getElementById('mostrarrolusuario').value;
        var roles = todoslosroles.filter(rol => rol != roltraido);

        // Ordena el Array Alfabeticamente, es muy facil ;)):
        roles.sort();
        addOptions("rolusuario", roles);
    }
    // Rutina para agregar opciones a un <select>
    function addOptions(domElement, roles) {
        var select = document.getElementsByName(domElement)[0];
        for (value in roles) {
            var option = document.createElement("option");
            option.text = roles[value];
            select.add(option);
        }
    }

    function ponerminuscula() {
        let ex = document.getElementById("email");
        ex.value = ex.value.toLowerCase();
        //let y = document.getElementById("adrema");
        //y.value = y.value.toLowerCase();
    }

    function ponermayuscula(mayu) {
        let ex = document.getElementById(mayu);
        ex.value = ex.value.toUpperCase();
        //let y = document.getElementById("adrema");
        //y.value = y.value.toLowerCase();
    }

    function ShowName(nombre) {
        var writtenName = document.getElementById(nombre).value;
        document.getElementById(nombre).value = formatToString(writtenName);
    }

    function formatToString(writtenName) {
        var tmp = writtenName.split(" ");
        var fullName;
        tmp.forEach(element => {
            if (fullName) {
                fullName = fullName + " " + element.charAt(0).toUpperCase() + element.slice(1).toLocaleLowerCase();
            } else {
                fullName = element.charAt(0).toUpperCase() + element.slice(1).toLocaleLowerCase();
            }
        })
        return fullName;
    }
</script>


<div class="col-md-7 mx-auto">
    <div class="card">
        <div class="card-header">
            <h3>Editar Ticket</h3>
        </div>
        <div class="card-body">
            <form action="/notes/editticket/{{ticket._id}}?_method=PUT" method="POST">
                <input type="hidden" name="_method" value="PUT">
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    N° Ticket:
                    <input type="text" name="numticket" class="form-control" placeholder="Sin Información"
                        value="{{ticket.numticket}}" style="color: #3d0ee7; font-weight: bold;">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Iniciador
                    <input onkeyup=ShowName("iniciador") type="text" id="iniciador" name="iniciador" class="form-control" placeholder="Iniciador"
                        value="{{ticket.iniciador}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Ubicación
                    <input  onkeyup=ShowName("ubicacion") type="text" id="ubicacion" name="ubicacion" class="form-control" placeholder="Ubicación"
                        value="{{ticket.ubicacion}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Celular
                    <input type="text" name="celular" class="form-control" placeholder="Celular"
                        value="{{ticket.celular}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    E-mail
                    <input type="text" name="email" class="form-control" placeholder="Correo Electrónico"
                        value="{{ticket.email}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Adrema:
                    <input type="text" name="adrema" class="form-control" placeholder="Adrema"
                        value="{{ticket.adrema}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Director de obra:
                    <input type="text" name="directordeobra" class="form-control" placeholder="Director de Obra"
                        value="{{ticket.directordeobra}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Destino de Obra:
                    <input type="text" name="destinodeobra" class="form-control" placeholder="Destino de Obra"
                        value="{{ticket.destinodeobra}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Superficie del terreno:
                    <input type="number" name="superficieterreno" class="form-control" placeholder="Superficie del Terreno" 
                        value="{{ticket.superficieterreno}}">
                </div>                
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Superficie a construir:
                    <input type="number" name="superficieaconstruir" class="form-control" placeholder="Superficie a Construir" 
                        value="{{ticket.superficieaconstruir}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Superficie Planta Baja:
                    <input type="number" name="supsubptabja" class="form-control" placeholder="Superficie Planta Baja"
                        value="{{ticket.supsubptabja}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Superficie Planta Alta y más:
                    <input type="number" name="supsubptaaltaymas" class="form-control" placeholder="Superficie Planta Alta y más" 
                    value="{{ticket.supsubptaaltaymas}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Zona:
                    <input type="text" name="zona" class="form-control" placeholder="Zona" 
                        value="{{ticket.zona}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Observaciones:
                    <input type="text" name="observaciones" class="form-control" placeholder="Observaciones"
                        value="{{ticket.observaciones}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Permiso de Obra:
                    <input type="text" name="permisoobra" class="form-control" placeholder="Permiso de Obra"
                        value="{{ticket.permisoobra}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Acta de Infracción:
                    <input type="text" name="actainfraccion" class="form-control" placeholder="Acta de Infracción"
                        value="{{ticket.actainfraccion}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Fecha Entrada a Inspecciones:
                    <input type="date" name="fechaentradainspecciones" class="form-control" placeholder="Fecha Entrada a Inspecciones" 
                        value="{{ticket.fechaentradainspecciones}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Código Inspector realizó Inspección:
                    <input type="text" name="condigoinspector" class="form-control" placeholder="Código Inspector realizó Inspección" 
                        value="{{ticket.codigoinspector}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Inspector realizó Inspección:
                    <input type="text" name="inspeccioninspector" class="form-control" placeholder="Inspector realizó Inspección" 
                        value="{{ticket.inspeccioninspector}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Fecha de Inspección:
                    <input type="date" name="inspeccionfecha" class="form-control" placeholder="Fecha de Inspección"
                        value="{{ticket.inspeccionfecha}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Posee Intimaciones:
                    <input type="text" name="intimaciones" class="form-control" placeholder="Intimaciones"
                        value="{{ticket.intimaciones}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Cantidad Intimaciones:
                    <input type="text" name="cantintimaciones" class="form-control" placeholder="Intimaciones"
                        value="{{ticket.cantintimaciones}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Posee Infracciones:
                    <input type="text" name="infracciones" class="form-control" placeholder="Infracciones"
                        value="{{ticket.infracciones}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Cantidad Infracciones:
                    <input type="text" name="cantinfracciones" class="form-control" placeholder="Infracciones"
                        value="{{ticket.cantinfracciones}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Pase a:
                    <input type="text" name="pasea" class="form-control" placeholder="Pase a"
                        value="{{ticket.pasea}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Fecha del Pase a:
                    <input type="date" name="fechapasea" class="form-control" placeholder="Fecha del Pase a"
                        value="{{ticket.fechapasea}}">
                </div>
                <div class="form-group" style="color:brown; font-style:oblique; font-weight: bold;">
                    Usuario Cargo Alta:
                    <input type="text" name="name" class="form-control" placeholder="Fecha del Pase a"
                        value="{{ticket.name}}" disabled>
                </div> 

                <div class="form-group">
                    <button class="btn btn-primary btn-block" type="submit">
                        Grabar
                    </button>
                </div>
                {{!-- <div class="form-group">
                    <p style="color:brown; font-style:oblique; font-weight: bold;"><a href="/ticket/listado"><i
                                class="fas fa-list" style='font-size:24px;color:blue'></i></a> Volver Listado</p>
                </div> --}}
                <br />
                <a href="javascript:window.history.back();" style="color:blue; font-weight: bold;">
                    &laquo; Volver Atrás
                </a>
                <br /><br />
            </form>
        </div>
    </div>
</div>